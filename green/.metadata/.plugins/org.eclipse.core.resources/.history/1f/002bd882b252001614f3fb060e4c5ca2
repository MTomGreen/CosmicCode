package green.thread;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.math.BigInteger;

import javax.swing.Timer;

import green.detector.Detector;
import green.math.LocationMath;
import green.util.DetectorUtils;
import green.util.WebUtils;

public class MainThread extends Thread {
	
	private static String timeString;
	private static String dateString;
	
	public static GUIThread gui;
	
	@Override
	public synchronized void start() {
		super.start();
		gui = new GUIThread(this);
		gui.start();

		DetectorUtils.init();
		
		ActionListener taskPerformer = new ActionListener(){
			public void actionPerformed(ActionEvent e){
				update();}};
		
		Timer t = new Timer(1000, taskPerformer); //Once per second
		t.setRepeats(true);
		t.start();
		
		BigInteger b = new BigInteger();
		System.out.println(LocationMath.SPEED_OF_MUON);

	}
	
	boolean done = false;
	public void update(){
		
		if(DetectorUtils.isDataLoaded() && done == false){
			for(Detector d : DetectorUtils.detectors){
				System.out.println(d.getName() + " #" + d.getStationID());
				System.out.println(d.getLatitude());
				System.out.println(d.getLongitude());
			}
			done = true;
		}
	}

	public static String getTime() {
		return timeString;
	}

	public static void setTime(String Time) {
		timeString = Time;
	}

	public static String getDate() {
		return dateString;
	}

	public static void setDate(String date) {
		dateString = date;
	}
	
	
	

}
